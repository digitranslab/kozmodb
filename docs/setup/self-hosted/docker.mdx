---
title: Docker for KozmoDB
sidebarTitle: Docker
---

KozmoDB provides Docker images that facilitate running KozmoDB in Docker containers.

<Tip>
As KozmoDB integrates with numerous [data sources](/integrations/data-overview) and [AI frameworks](/integrations/ai-overview), each integration requires a set of dependencies. Hence, KozmoDB provides multiple Docker images for different tasks, as outlined below.

* `digitranslab/kozmodb:latest` (or `digitranslab/kozmodb`)
It is the lightweight Docker image of KozmoDB that comes with [these integrations preloaded](https://github.com/digitranslab/kozmodb/blob/main/default_handlers.txt).

* `digitranslab/kozmodb:lightwood`
It is the Docker image of KozmoDB that comes with [these integrations](https://github.com/digitranslab/kozmodb/blob/main/default_handlers.txt) and the Lightwood integration preloaded.

* `digitranslab/kozmodb:huggingface`
It is the Docker image of KozmoDB that comes with [these integrations](https://github.com/digitranslab/kozmodb/blob/main/default_handlers.txt) and the Hugging Face integration preloaded.
</Tip>

## Prerequisites

Before proceeding, ensure you have installed Docker, following the [official Docker documentation](https://docs.docker.com/install).

## Setup

This setup of KozmoDB uses one of the available Docker images, as listed above.

<Note>
When running KozmoDB in one container and the integration you want to connect to it (such as Ollama or PGVector) in another container, then use `http://host.docker.internal` instead of `localhost` when connecting this integration to KozmoDB.
</Note>

Follow the steps to set up KozmoDB in a Docker container.

### Install KozmoDB

Run this command to create a Docker container with KozmoDB:

```bash
docker run --name kozmodb_container \
-e KOZMODB_APIS=http,mysql \
-p 47334:47334 -p 47335:47335 \
digitranslab/kozmodb
```

Where:

-   `docker run` is a native Docker command used to spin up a container.
-   `--name kozmodb_container` defines a name for the container.
-   `-e KOZMODB_APIS=http,mysql` defines the APIs to be exposed by the KozmoDB instance. All available APIs include `http`, `mysql`, and `postgres`.
-   `-p 47334:47334 -p 47335:47335` defines the ports where the APIs are exposed (HTTP and MySQL respectively).
-   `digitranslab/kozmodb` is a Docker image provided by KozmoDB. You can choose a different one from the list above.

Once the container is created, you can use the following commands:

-   `docker stop kozmodb_container` to stop the container. *Note that this may not always be necessary because when turning off the host machine, the container will also be shut down.*
-   `docker start kozmodb_container` to restart a stopped container with all its previous changes (such as any dependencies that were installed) intact. *Note that `docker start` restarts a stopped container, while `docker run` creates a new container.*

<Tip>
If you don't want to follow the logs and get the prompt back, add the `-d` flag that stands for *detach*.

```bash
docker run --name kozmodb_container -e KOZMODB_APIS=http -d -p 47334:47334 digitranslab/kozmodb
```
</Tip>

<Tip>
If you want to persist your models and configurations in the host machine, run these commands:

```bash
mkdir mdb_data
docker run --name kozmodb_container -e KOZMODB_APIS=http -p 47334:47334 -v $(pwd)/mdb_data:/root/mdb_storage digitranslab/kozmodb
```

Where `-v $(pwd)/mdb_data:/root/mdb_storage` maps the newly created folder `mdb_data` on the host machine to the `/root/mdb_storage` inside the container.
</Tip>

Now you can access the KozmoDB editor by going to `127.0.0.1:47334` in your browser.

<p align="center">
  <img src="/assets/kozmodb-editor.png" />
</p>

<Warning>
If you experience any issues related to MKL or your training process does not complete, please add the `MKL_SERVICE_FORCE_INTEL` environment variable, as below.

```bash
docker run --name kozmodb_container -e MKL_SERVICE_FORCE_INTEL=1 -e KOZMODB_APIS=http -p 47334:47334 digitranslab/kozmodb
```
</Warning>

<Tip>
If you want to enable authentication for KozmoDB, you do so by passing the `KOZMODB_USERNAME` and `KOZMODB_PASSWORD` environment variables when running the container.

```bash
docker run --name kozmodb_container -e KOZMODB_USERNAME='admin' -e KOZMODB_PASSWORD='password' -e KOZMODB_APIS=http -p 47334:47334 digitranslab/kozmodb
```
</Tip>

### Install dependencies

KozmoDB integrates with numerous data sources and AI frameworks. To use any of the integrations, you should ensure that the required dependencies are installed in the Docker container.

**Method 1**

Install dependencies directly from KozmoDB editor. Go to *Settings* and *Manage Integrations*, select integrations you want to use and click on *Install*.

<p align="center">
  <img src="/assets/install-dependencies-gui.png"/>
</p>

**Method 2**

Start the KozmoDB Docker container:

```bash
docker start kozmodb_container
```

<Tip>
If you haven't specified a container name when spinning up a container with `docker run`, you can find it by running `docker ps`.
</Tip>

<Tip>
If you haven't yet created a container, use this command:

```bash
docker run --name kozmodb_container -e KOZMODB_APIS=http -d -p 47334:47334 digitranslab/kozmodb
```
</Tip>

Start an interactive shell in the container:

```bash
docker exec -it kozmodb_container sh
```

Install the dependencies:

```bash
pip install .[handler_name]
```

For example, run this command to install dependencies for the [OpenAI handler](https://github.com/digitranslab/kozmodb/tree/main/kozmodb/integrations/handlers/openai_handler):

```bash
pip install .[openai]
```

Exit the interactive shell:

```bash
exit
```

Restart the container:

```bash
docker restart kozmodb_container
```

## Configuration

This is a configuration for KozmoDB's Docker image that includes storage location, log level, debugging information, installed integrations, and API endpoints. These parameters can be customized by modifying a JSON file that stores default configuration.

### Default configuration

The default configuration for KozmoDB's Docker image is stored as a JSON code, as below.

```json
{
    "config_version":"1.4",
    "paths": {
        "root": "/root/mdb_storage"
    },
    "debug": false,
    "integrations": {},
    "api": {
        "http": {
            "host": "0.0.0.0",
            "port": "47334"
        },
        "mysql": {
            "host": "0.0.0.0",
            "password": "",
            "port": "47335",
            "user": "kozmodb",
            "database": "kozmodb",
            "ssl": true
        }
    }
}
```

### Custom configuration

To override the default configuration, you can mount a config file created in your host machine over `/root/kozmodb_config.json`, as below.

```bash
docker run --name kozmodb_container -e KOZMODB_APIS=http -d -p 47334:47334 -v $(pwd)/mdb_config.json:/root/kozmodb_config.json digitranslab/kozmodb
```

<Tip>
**What's next?**

Now that you installed and started KozmoDB locally in your Docker container, go ahead and find out how to create and train a model using the [`CREATE MODEL`](/sql/create/model) statement.

Check out the [Use Cases](/use-cases/overview) section to follow tutorials that cover Large Language Models, Chatbots, Time Series, Classification, and Regression models, Semantic Search, and more.
</Tip>
